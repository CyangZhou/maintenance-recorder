package com.papermill.maintenance.ui.theme

import android.app.Activity
import android.compose.foundation.isSystemInDarkTheme
import android.compose.material3.MaterialTheme
import android.compose.material3.darkColorScheme
import android.compose.material3.lightColorScheme
import android.compose.runtime.Composable
import android.compose.runtime.SideEffect
import android.compose.ui.graphics.toArgb
import android.compose.ui.platform.LocalView
import android.core.view.WindowCompat

private val DarkColorScheme = darkColorScheme(
    primary = Primary,
    onPrimary = SurfaceColor,
    primaryContainer = PrimaryDark,
    onPrimaryContainer = TextPrimary,
    secondary = Accent,
    onSecondary = SurfaceColor,
    tertiary = PrimaryLight,
    background = Background,
    surface = SurfaceColor,
    onBackground = TextPrimary,
    onSurface = TextPrimary,
    error = Error,
    onError = SurfaceColor
)

private val LightColorScheme = lightColorScheme(
    primary = Primary,
    onPrimary = SurfaceColor,
    primaryContainer = PrimaryLight,
    onPrimaryContainer = TextPrimary,
    secondary = Accent,
    onSecondary = SurfaceColor,
    tertiary = PrimaryDark,
    background = Background,
    surface = SurfaceColor,
    onBackground = TextPrimary,
    onSurface = TextPrimary,
    error = Error,
    onError = SurfaceColor
)

@Composable
fun MaintenanceRecorderTheme(
    darkTheme: Boolean = isSystemInDarkTheme(),
    dynamicColor: Boolean = false,
    content: @Composable () -> Unit
) {
    val colorScheme = if (darkTheme) DarkColorScheme else LightColorScheme
    
    val view = LocalView.current
    if (!view.isInEditMode) {
        SideEffect {
            val window = (view.context as Activity).window
            window.statusBarColor = colorScheme.primary.toArgb()
            WindowCompat.getInsetsController(window, view).isAppearanceLightStatusBars = !darkTheme
        }
    }

    MaterialTheme(
        colorScheme = colorScheme,
        typography = Typography,
        shapes = Shapes,
        content = content
    )
}